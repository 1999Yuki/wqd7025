<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <title>House Price Prediction</title>
  </head>
  <body class="bg-light">
    <div class="container py-5">
      <div class="card shadow-sm">
        <div class="card-body">
          <h1 class="card-title text-center mb-4">House Price Prediction</h1>
          <form method="post">
            <div class="row g-3">

              <!-- Numeric inputs -->
              {% for feat in numeric_features %}
              <div class="col-md-4">
                <label class="form-label">{{ feat.replace('_', ' ') }}</label>
                <input type="number" step="any" name="{{ feat }}" class="form-control"
                       value="{{ defaults[feat] if defaults[feat] is defined else '' }}" required>  <!-- ✅ 加入默认值 -->
              </div>
              {% endfor %}

              <!-- Boolean selects -->
              {% for feat in boolean_features %}
              <div class="col-md-4">
                <label class="form-label">{{ feat }}</label>
                <select name="{{ feat }}" class="form-select">
                  <option value="1" {% if defaults[feat]|int == 1 %}selected{% endif %}>Yes</option>  <!-- ✅ 选中默认 -->
                  <option value="0" {% if defaults[feat]|int == 0 %}selected{% endif %}>No</option>
                </select>
              </div>
              {% endfor %}

              <!-- Property Type dropdown -->
              <div class="col-md-6">
                <label class="form-label">Property Type</label>
                <select name="property_type" class="form-select">
                  {% for col in property_type_columns %}
                  <option value="{{ col }}" {% if defaults['property_type'] == col %}selected{% endif %}>
                    {{ col.replace('Property Type_', '') }}
                  </option>
                  {% endfor %}
                </select>
              </div>

              <!-- Property Description dropdown -->
              <div class="col-md-6">
                <label class="form-label">Property Description</label>
                <select name="property_description" class="form-select">
                  {% for col in property_desc_columns %}
                  <option value="{{ col }}" {% if defaults['property_description'] == col %}selected{% endif %}>
                    {{ col.replace('Property_description_', '') }}
                  </option>
                  {% endfor %}
                </select>
              </div>

              <!-- Location dropdown -->
              <div class="col-md-6">
                <label class="form-label">Location</label>
                <select name="location" class="form-select">
                  {% for col in location_columns %}
                  <option value="{{ col }}" {% if defaults['location'] == col %}selected{% endif %}>
                    {{ col.replace('Location_', '') }}
                  </option>
                  {% endfor %}
                </select>
              </div>

            </div>

            <div class="d-grid mt-4">
              <button type="submit" class="btn btn-primary btn-lg">Predict Price</button>
            </div>
          </form>

          {% if prediction %}
          <div class="alert alert-success mt-4 text-center">
            Predicted Price: <strong>RM {{ prediction }}</strong>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
